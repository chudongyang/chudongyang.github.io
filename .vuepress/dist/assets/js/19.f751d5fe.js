(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{676:function(t,e,s){"use strict";s.r(e);var a=s(49),i=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"vuepress-travis-github搭建文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuepress-travis-github搭建文档"}},[t._v("#")]),t._v(" VuePress+Travis+Github搭建文档")]),t._v(" "),s("p",[t._v("VuePress+Travis+Github自动化构建生成线上文档，整体思路可以分为如下三个步骤：")]),t._v(" "),s("ol",[s("li",[t._v("使用github搭建自己的文档仓库")]),t._v(" "),s("li",[t._v("使用vuePress构建自己的文档项目")]),t._v(" "),s("li",[t._v("使用Travis CI自动化部署项目")])]),t._v(" "),s("h3",{attrs:{id:"github创建项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github创建项目"}},[t._v("#")]),t._v(" Github创建项目")]),t._v(" "),s("img",{attrs:{src:"/1.png",height:"400",width:"auto"}}),t._v(" "),s("ul",[s("li",[t._v("首先在github上创建一个类似"),s("code",[t._v("[name].github.io")]),t._v("这样的仓库,这样方便通过 "),s("code",[t._v("https://[name].github.io")]),t._v(" 直接访问到这个项目")]),t._v(" "),s("li",[t._v("将创建好的项目克隆项目到本地")])]),t._v(" "),s("h3",{attrs:{id:"使用vuepress搭建文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用vuepress搭建文档"}},[t._v("#")]),t._v(" 使用vuePress搭建文档")]),t._v(" "),s("p",[t._v("在克隆好的项目中，切换到新建的docs分支(master分支要存放生产环境的代码)，用于存放文档源码，之后都在此分支上提交源码。使用"),s("code",[t._v("npm init -y")]),t._v("初始化项目后，安装vuepress依赖，并配置脚本和vuepress基础配置。最终搭建的项目基础骨架如下图所示：")]),t._v(" "),s("img",{attrs:{src:"/2.png",height:"200",width:"auto"}}),t._v(" "),s("ul",[s("li",[t._v("docs目录下的 "),s("code",[t._v("README.md")]),t._v(" 会被作为项目的启动页面，其内容如下，可以根据自己的需要进行修改：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("---\nhome: true\nheroImage: /avatar.jpeg\nactionText: 笔记详情 →\nactionLink: /blog/博客\nfeatures:\n- title: 学习笔记\n  details: 学习笔记\n- title: 学习兴趣\n  details: 学习兴趣\n- title: 个人介绍\n  details: 个人介绍\nfooter: MIT Licensed | Copyright © 2018-present \n---\n\n### star\n如果感觉对您有帮助，请不要吝啬点个star，作者感谢o(￣︶￣)o  Promise \n")])])]),s("ul",[s("li",[t._v("在package.json中加入开发和生产环境的运行脚本")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('"scripts": {\n\t"dev": "vuepress dev docs",\n\t"build": "vuepress build docs"\n}\n')])])]),s("ul",[s("li",[t._v("在config.js文件中可以配置vuepress的一些基础配置，详情配置可以查看 "),s("a",{attrs:{href:"https://vuepress.vuejs.org/zh/config/",title:"描述信息",target:"_blank",rel:"noopener noreferrer"}},[t._v("VuePress配置"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module.exports = {\n\ttitle: '学习笔记', // 网站的标题，它将会被用作所有页面标题的前缀\n\tdescription: '描述', // 网站的描述\n\tbase: '/', // 基路径\n\thead: [ // 需要被注入到当前页面的 HTML <head> 中的标签\n\t\t['link', { rel: 'icon', href: '/favicon.ico' }] // 路径的\"/\"就是public资源目录\n\t],\n\thost: '127.0.0.1',\n\tport: '8080',\n\tdest: '.vuepress/dist', // 指定 vuepress build 的输出目录。\n\tMarkdown: {\n\t\tlineNumbers: true // 是否在每个代码块的左侧显示行号。\n\t},\n\tthemeConfig: {\n\t\tsidebarDepth: 1, // 嵌套的标题链接深度\n\t\tlastUpdated: '更新时间', // 最后更新时间,基于 git 的\n\t\tdisplayAllHeaders: false, // 显示所有页面的标题链接\n\t\tactiveHeaderLinks: true, // 是否禁用滚动中的标题链接和url中hash值的更新\n\t\tsearch: false, // 是否禁用搜索框， 也可以通过 Algolia 搜索 替换内置搜索\n\t\tsearchMaxSuggestions: 10, // 设置搜索结果数量\n\t\t// 头部导航配置\n\t\tnav: [\n\t\t\t{ text: 'GitHub', link: 'https://www.baidu.com' },\n\t\t\t{ text: '博客', \n\t\t\t\titems: [\n\t\t\t\t\t{ text: '博客1', link: 'https://www.baidu.com' },\n\t\t\t\t\t{ text: '博客2', link: 'https://www.baidu.com' }\n\t\t\t\t]\n\t\t\t}\n\t\t],\n\t\t// 侧边栏配置\n\t\tsidebar: [\n\t\t\t{ title: '博客文章', collapsable: false, children: [ '/blog/博客']}\n\t\t]\n\t}\n}\n")])])]),s("h3",{attrs:{id:"travis-ci配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci配置"}},[t._v("#")]),t._v(" Travis CI配置")]),t._v(" "),s("p",[s("code",[t._v("Travis CI")]),t._v(" 提供的是持续集成服务, 它只支持 Github项目。当项目中代码有变更，它便会提供一个运行环境，执行测试，完成构建，还能部署到服务器。")]),t._v(" "),s("ol",[s("li",[t._v("首先在项目根目录下创建 "),s("code",[t._v(".travis.yml")]),t._v(" 文件。Travis CI的基础教程，可以参考阮一峰的"),s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("持续集成服务 Travis CI 教程"),s("OutboundLink")],1),t._v("，其中的UESR_NAME、UESR_EMAIL、GIHUB_TOKEN、GIHUB_REF、BRANCH是需要在travis网站配置的环境变量。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('language: node_js\nnode_js:\n    - 10\ncache: yarn\ninstall:\n    - yarn\nscript:\n   - yarn build\nafter_success:\n    - cd .vuepress/dist\n    - git init\n    - git config --global user.name "${UESR_NAME}"\n    - git config --global user.email "${UESR_EMAIL}"\n    - git add -A\n    - git commit -m \'deploy vuePress docs\'\n    - git push --quiet --force "https://${GIHUB_TOKEN}@${GIHUB_REF}" master:${PUSH_BRANCH}\n')])])]),s("blockquote",[s("p",[t._v("一定要注意此"),s("code",[t._v(".travis.yml")]),t._v(" 文件的格式，如果格式不对，会导致构建失败。")])]),t._v(" "),s("ul",[s("li",[t._v("UESR_NAME:   github的用户名")]),t._v(" "),s("li",[t._v("UESR_EMAIL:  github的邮箱")]),t._v(" "),s("li",[t._v("GIHUB_REF:   项目目地址（github.com/[name]/[name].github.io.git）注意去掉 https:// （如果不清楚地址可以查看Clone or download 按钮）")]),t._v(" "),s("li",[t._v("PUSH_BRANCH:      要上传的分支")]),t._v(" "),s("li",[t._v("GIHUB_TOKEN: 访问GitHub API的个人访问令牌 通过 settings->Developer settings->Personal access tokens->Generate new token 生成新的token\n"),s("img",{attrs:{src:"/4.png",height:"400",width:"auto"}})])]),t._v(" "),s("blockquote",[s("p",[t._v("Note可以随便填，下面的选项是选择该token的使用权限")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("使用github账号访问 "),s("a",{attrs:{href:"https://travis-ci.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("tracis官方网站"),s("OutboundLink")],1),t._v("，将需要travis监听的项目激活，并配置环境变量，如下图所示\n"),s("img",{attrs:{src:"/3.png",height:"365",width:"auto"}}),t._v(" "),s("img",{attrs:{src:"/5.png",height:"380",width:"auto"}})])]),t._v(" "),s("li",[s("p",[t._v("将本地项目推到github上,并更改该仓库的默认分支，如下图所示\n"),s("img",{attrs:{src:"/6.png",height:"300",width:"auto"}})])]),t._v(" "),s("li",[s("p",[t._v("开启 GitHub Pages\n"),s("img",{attrs:{src:"/8.png",height:"310",width:"auto"}})])]),t._v(" "),s("li",[s("p",[t._v("打开 "),s("a",{attrs:{href:"https://travis-ci.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("tracis官方网站"),s("OutboundLink")],1),t._v(" 查看项目构建的状态，如果构建失败，可以点击进入详情查看构建日志\n"),s("img",{attrs:{src:"/7.png",height:"200",width:"auto"}})])])])])}),[],!1,null,null,null);e.default=i.exports}}]);